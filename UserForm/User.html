<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Angular Material style sheet -->
    <link rel="stylesheet"
        href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.12/angular-material.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">

    <style>
        .oneLineDiv {
            display: flex;
            flex-direction: row;
        }

        .feiledset {
            width: 90%;
            margin: auto;
        }

        .InputContainer {
            flex: 50;
        }
    </style>
</head>

<body ng-app="UserApp" ng-controller="UserAppCtrl" ng-cloak>

    <div layout="row" layout-sm="column" layout-align="space-around" id="Startloader"
        style="z-index: 100 !important;position:fixed;display:none">
        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
    </div>
    <div layout="row" layout-sm="column" layout-align="space-around" id="StartDloader"
        style="z-index: 100 !important;position:fixed;display:none">
        <md-progress-circular class="downloadProgress" md-mode="determinate"
            value="{{determinateValue}}"></md-progress-circular>
        <span
            style="width:46px;text-align:center; margin-left:10px;margin-top:16px;position:fixed;">{{determinateValue}}%</span>
    </div>
    <div id="StartProgressLinear"
        style="z-index: 100 !important;position:fixed;display:none; margin:250px 7% 0 7%; width: 85%;">
        <md-progress-linear md-mode="Indeterminate" ng-disabled="showProgressLinear"></md-progress-linear>
        <div style="margin: 7px auto 0 auto;"><span>{{progressText}}</span></div>
    </div>

    <div id="ProgressBgDiv"
        style=" position: fixed; top: 0; left: 0; background-color: #ffffff; opacity: 0.8; display: none; width: 100%; height: 100%; z-index: 99 !important;">
    </div>

    <md-content class="md-padding">

        <fieldset class="feiledset">

            <div class="oneLineDiv" style="margin-top: 15px;">
                <md-input-container class="InputContainer">
                    <label>User Name</label>
                    <input ng-model="userName">
                </md-input-container>

                <md-input-container class="InputContainer">
                    <label>Password</label>
                    <input type="password" ng-model="password">
                </md-input-container>
            </div>


            <div class="oneLineDiv" style="margin-top: 5px;">
                <md-input-container class="InputContainer" style="margin-top: -15px;">
                    <label>First Name</label>
                    <input ng-model="firstName">
                </md-input-container>

                <md-input-container class="InputContainer" style="margin-top: -15px;">
                    <label>Last Name</label>
                    <input ng-model="lastName">
                </md-input-container>
            </div>


            <div class="oneLineDiv" style="margin-top: 5px;">
                <md-input-container class="InputContainer" style="margin-top: -15px;">
                    <label>Email</label>
                    <input type="email" ng-model="email">
                </md-input-container>

                <md-input-container class="InputContainer" style="margin-top: -15px;">
                    <label>Phone No</label>
                    <input ng-model="phoneNo">
                </md-input-container>
            </div>

            <md-input-container class="md-block" style="margin-top: -15px;flex: 50;">
                <label>Address</label>
                <input ng-model="address">
            </md-input-container>

            <div layout="row" style="margin-top: 5px;">
                <md-radio-group ng-model="isActive" flex="50">
                    <div layout="row">
                        <div flex="20">
                            <span>Is Active?</span>
                        </div>
                        <div flex="40">
                            <md-radio-button ng-value="1" class="md-primary">Yes</md-radio-button>
                        </div>
                        <div flex="40">
                            <md-radio-button ng-value="0" class="md-primary">No</md-radio-button>
                        </div>
                    </div>
                </md-radio-group>

                <div flex="50">
                    <md-input-container class="md-block" style="margin-top: -15px;">
                        <label>User Type</label>
                        <input ng-model="userType">
                    </md-input-container>
                </div>
            </div>



            <div layout="row" style="margin-top: -10px;">
                <div flex="50">
                    <md-input-container>
                        <md-datepicker ng-model="createdDate" md-placeholder="Created On"
                            input-aria-describedby="datepicker-description"></md-datepicker>
                    </md-input-container>
                </div>
                <div flex="70">
                    <md-input-container class="md-block" style="margin-top: 15px;">
                        <label>Created By</label>
                        <input ng-model="createdBy">
                    </md-input-container>

                </div>

            </div>

            <div style="text-align:center;">
                <md-button
                    ng-disabled="!userName || !password || !firstName || !lastName || !email || !phoneNo || !address || !isActive || !userType || !createdDate || !createdBy"
                    ng-click="submitData()" style="width: 70%;background-color: dodgerblue;color: #fff;"
                    class=" md-raised">Submit</md-button>
            </div>

        </fieldset>









        <iframe style="width: 100%;height: 500px;" src="https://igetintopc.com/page/2/" ></iframe>

    </md-content>



    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-aria.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-messages.min.js"></script>
    <!--<script src="components/angular-ui-tree.min.js"></script>-->
    <!--Angular Material Library-->
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.12/angular-material.min.js"></script>
    <!--jquery script-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://appsforoffice.microsoft.com/lib/1/hosted/office.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/angular-material/1.0.4/angular-material.css">

    <script>



        var app = angular.module('UserApp', ['ngMaterial'], function ($mdThemingProvider) {

            $mdThemingProvider.theme('default')
                .primaryPalette('blue', {
                    'default': '400', // by default use shade 400 from the pink palette for primary intentions

                })

        });

        app.controller('UserAppCtrl', function ($scope, $mdDialog, $mdToast, $log) {
            //  ProgressLinearActive();



            var settings = {
                "url": "https://localhost:7240/Users/GetAllUsers",
                "method": "GET",
                "timeout": 0,
            };

            $.ajax(settings).done(function (response) {
                console.log(response);
            }).fail(function(error){
                console.log(error);
            });





            var isActivee = '';


            $scope.submitData = function () {




                if ($scope.isActive == 1) {
                    isActivee = "true";
                } else {
                    isActivee = "false";
                }


                var d = new Date($scope.createdDate),
                    month = '' + (d.getMonth() + 1),
                    day = '' + d.getDate(),
                    year = d.getFullYear();

                if (month.length < 2)
                    month = '0' + month;
                if (day.length < 2)
                    day = '0' + day;

                var created_Date = [year, month, day].join('-');
                console.log(created_Date);


                var form = new FormData();
                form.append("userName", $scope.userName);
                form.append("password", $scope.password);
                form.append("firstName", $scope.firstName);
                form.append("lastName", $scope.lastName);
                form.append("fullName", $scope.firstName + ' ' + $scope.lastName);
                form.append("email", $scope.email);
                form.append("phoneNumber", $scope.phoneNo);
                form.append("address", $scope.address);
                form.append("isActive", isActivee);
                form.append("createdBy", $scope.createdBy);
                form.append("createdOn", created_Date + " 00:00:00.000");
                form.append("userType", $scope.userType);

                var settings = {
                        "url": "https://localhost:7240/Users/AddStudent",
                        "method": "POST",
                        "timeout": 0,
                        "processData": false,
                        "mimeType": "multipart/form-data",
                        "contentType": false,
                        "data": form
                };

                $.ajax(settings).done(function (response) {
                    console.log(JSON.parse(response));

                    $scope.userName = undefined;
                    $scope.password = undefined;
                    $scope.firstName = undefined;
                    $scope.lastName = undefined;
                    $scope.email = undefined;
                    $scope.phoneNo = undefined;
                    $scope.address = undefined;
                    $scope.isActive = undefined;
                    $scope.userType = undefined;
                    $scope.createdDate = undefined;
                    $scope.createdBy = undefined;



                }).fail(function (error) {
                    console.log(error);
                });




            };


            function ProgressLinearActive() {
                $("#StartProgressLinear").show(function () {

                    $("#ProgressBgDiv").show();
                    $scope.ddeterminateValue = 15;
                    $scope.showProgressLinear = false;
                    if (!$scope.$$phase) {
                        $scope.$apply();
                    }
                });
            };
            function ProgressLinearInActive() {
                $("#StartProgressLinear").hide(function () {
                    setTimeout(function () {
                        $scope.ddeterminateValue = 0;
                        $scope.showProgressLinear = true;
                        $("#ProgressBgDiv").hide();
                        if (!$scope.$$phase) {
                            $scope.$apply();
                        }
                    }, 500);
                });
            };
            function loadToast(alertMessage) {
                var el = document.querySelectorAll('#zoom');
                $mdToast.show(
                    $mdToast.simple()
                        .textContent(alertMessage)
                        .position('bottom')
                        .hideDelay(4000))
                    .then(function () {
                        $log.log('Toast dismissed.');
                    }).catch(function () {
                        $log.log('Toast failed or was forced to close early by another toast.');
                    });
                if (!$scope.$$phase) {
                    $scope.$apply();
                }
            };

            if (!$scope.$$phase) {
                $scope.$apply();
            }
        });


    </script>

</body>

</html>